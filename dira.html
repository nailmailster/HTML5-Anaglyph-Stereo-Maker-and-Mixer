<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='utf-8' />
	<title>postMessage cross domain communication demo - the web app</title>
	<link href='http://html5resetcss.googlecode.com/files/html5reset-1.6.1.css' media='screen' rel='stylesheet' />
	<link href='css/style.css' media='screen' rel='stylesheet' />
	<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>
<body>
	<header>
		<h1>This is a web application</h1>
	</header>
	<ol>
		<li>
			<p>
				It loads 3 images from another domain under my control,
				<code>s3-clone.heroku.com</code>
			</p>
			<ul id='images'>
				<li>
					<img data-path='http://images1.wikia.nocookie.net/__cb20101205135822/southpark/images/archive/0/06/20101206173923!ButtersStotch.png' src="http://images1.wikia.nocookie.net/__cb20101205135822/southpark/images/archive/0/06/20101206173923!ButtersStotch.png" />
				</li>
				<li>
					<img data-path='images/image2.png' />
				</li>
				<li>
					<img data-path='images/image3.png' />
				</li>
			</ul>
		</li>
		<li>
			<p>Stiches them in a canvas</p>
			<canvas height='100' id='main' width='300'></canvas>
		</li>
		<li>
			<p>
				Manipulates the existing pixels
			</p>
		</li>
		<li>
			<p>
				And calls
				<code>canvas.toDataUrl</code>
				without a Browser Security Error.
				<a href='http://dira.ro/2011/10/17/heroku-s3-canvas-and-the-security-error-of-doom'>Read this blog post to see how</a>
			</p>
		</li>
	</ol>
	<div id='proof'>
		Here is
		<code>canvas.toDataUrl</code>
		<textarea id='proof_text'></textarea>
		<p>
			And
			<code>canvas.toDataUrl</code>
			dumped in yet another image.
		</p>
		<img id='proof_image' />
	</div>
	<footer>
		<p>
			Images from
			<a href='http://tzigla.com/boards/1'>quack, quack, pixel duck - a collaborative drawing on Tzigla</a>
		</p>
	</footer>
	<script src='js/proxy.js' type='text/javascript'></script>
	<script src='js/application.js' type='text/javascript'></script>
	<script type='text/javascript'>
		//<![CDATA[
		window.onload = function() {
			application = new Application.Main()
		}
		//]]>
	</script>
</body>
</html>

